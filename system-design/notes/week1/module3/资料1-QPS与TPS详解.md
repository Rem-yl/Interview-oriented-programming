# QPS vs TPS - æ€§èƒ½æŒ‡æ ‡è¯¦è§£

> åŸºäº AWS Builders' Library å’Œæ€§èƒ½å·¥ç¨‹æœ€ä½³å®è·µ

---

## ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ

### 1.1 QPS (Queries Per Second)

**å®šä¹‰**: æ¯ç§’æŸ¥è¯¢æ•°ï¼Œç³»ç»Ÿæ¯ç§’èƒ½å¤Ÿå“åº”çš„è¯·æ±‚æ•°é‡ã€‚

**é€‚ç”¨åœºæ™¯**:
- Web æœåŠ¡å™¨æ€§èƒ½æŒ‡æ ‡
- API Gateway ååé‡
- è¯»å¯†é›†å‹æœåŠ¡ï¼ˆæœç´¢ã€æŸ¥è¯¢ï¼‰
- ç¼“å­˜ç³»ç»Ÿï¼ˆRedisã€Memcachedï¼‰

**ç¤ºä¾‹**:
```
ç”¨æˆ·è®¿é—®ç½‘ç«™é¦–é¡µ: 1 ä¸ª HTTP GET è¯·æ±‚ = 1 QPS
è°ƒç”¨ API æ¥å£: 1 æ¬¡ REST API è°ƒç”¨ = 1 QPS
æ•°æ®åº“æŸ¥è¯¢: 1 æ¡ SELECT è¯­å¥ = 1 QPS
```

### 1.2 TPS (Transactions Per Second)

**å®šä¹‰**: æ¯ç§’äº‹åŠ¡æ•°ï¼Œç³»ç»Ÿæ¯ç§’èƒ½å¤Ÿå®Œæˆçš„äº‹åŠ¡æ•°é‡ï¼ˆä¸€ä¸ªäº‹åŠ¡å¯èƒ½åŒ…å«å¤šä¸ªæ“ä½œï¼‰ã€‚

**äº‹åŠ¡çš„ç‰¹å¾** (ACID):
- **Atomicity** (åŸå­æ€§): æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥
- **Consistency** (ä¸€è‡´æ€§): äº‹åŠ¡å‰åæ•°æ®ä¿æŒä¸€è‡´
- **Isolation** (éš”ç¦»æ€§): å¹¶å‘äº‹åŠ¡ç›¸äº’éš”ç¦»
- **Durability** (æŒä¹…æ€§): æäº¤åæ•°æ®æ°¸ä¹…ä¿å­˜

**é€‚ç”¨åœºæ™¯**:
- æ•°æ®åº“äº‹åŠ¡å¤„ç†
- æ”¯ä»˜ç³»ç»Ÿ
- è®¢å•ç³»ç»Ÿ
- è½¬è´¦æ“ä½œ

**ç¤ºä¾‹**:
```
è½¬è´¦äº‹åŠ¡:
BEGIN TRANSACTION;
  SELECT balance FROM accounts WHERE id = 1;  -- æŸ¥è¯¢ä½™é¢
  UPDATE accounts SET balance = balance - 100 WHERE id = 1;  -- æ‰£æ¬¾
  UPDATE accounts SET balance = balance + 100 WHERE id = 2;  -- åŠ æ¬¾
  INSERT INTO transfer_log VALUES (...);  -- è®°å½•æ—¥å¿—
COMMIT;

è¿™æ˜¯ 1 ä¸ª TPSï¼Œä½†åŒ…å«äº† 4 ä¸ªæ•°æ®åº“æ“ä½œï¼ˆQPSï¼‰
```

### 1.3 å¯¹æ¯”æ€»ç»“

| ç»´åº¦ | QPS | TPS |
|------|-----|-----|
| **å®šä¹‰** | æ¯ç§’è¯·æ±‚æ•° | æ¯ç§’äº‹åŠ¡æ•° |
| **ç²’åº¦** | å•ä¸ªè¯·æ±‚/æŸ¥è¯¢ | ä¸€ç»„åŸå­æ“ä½œ |
| **å…³ç³»** | 1 TPS å¯èƒ½å¯¹åº”å¤šä¸ª QPS | 1 TPS = N Ã— QPS (N â‰¥ 1) |
| **åœºæ™¯** | Web æœåŠ¡ã€APIã€ç¼“å­˜ | æ•°æ®åº“ã€æ”¯ä»˜ã€è®¢å• |
| **å…³æ³¨ç‚¹** | ååé‡ã€å¹¶å‘èƒ½åŠ› | æ•°æ®ä¸€è‡´æ€§ã€å®Œæ•´æ€§ |

---

## äºŒã€è®¡ç®—æ–¹æ³•

### 2.1 åŸºæœ¬å…¬å¼

```
QPS = æ€»è¯·æ±‚æ•° / æ—¶é—´(ç§’)

TPS = æ€»äº‹åŠ¡æ•° / æ—¶é—´(ç§’)

å¹³å‡å“åº”æ—¶é—´ = æ€»æ—¶é—´ / æ€»è¯·æ±‚æ•°

å¹¶å‘ç”¨æˆ·æ•° = QPS Ã— å¹³å‡å“åº”æ—¶é—´ (Little's Law)
```

### 2.2 å³°å€¼ä¼°ç®—

**å³°å€¼ QPS è®¡ç®—**:

```
æ—¥æ€»è¯·æ±‚é‡ = DAU Ã— äººå‡è¯·æ±‚æ•°

å¹³å‡ QPS = æ—¥æ€»è¯·æ±‚é‡ / 86400ç§’

æ´»è·ƒæ—¶æ®µ QPS = æ—¥æ€»è¯·æ±‚é‡ / æ´»è·ƒæ—¶é•¿(ç§’)

å³°å€¼ QPS = æ´»è·ƒæ—¶æ®µ QPS Ã— å³°å€¼å› å­

å³°å€¼å› å­é€šå¸¸å–å€¼:
- æ™®é€šä¸šåŠ¡: 2-3 å€
- ç”µå•†/ä¿ƒé”€: 5-10 å€
- ç§’æ€æ´»åŠ¨: 100+ å€
```

**å®é™…æ¡ˆä¾‹**:

```
ç”µå•†ç½‘ç«™ä¼°ç®—:
- DAU: 100 ä¸‡
- äººå‡è¯·æ±‚: 50 æ¬¡/å¤©
- æ´»è·ƒæ—¶æ®µ: 10:00-22:00 (12 å°æ—¶)
- å³°å€¼å› å­: 3 å€

è®¡ç®—:
æ—¥æ€»è¯·æ±‚ = 1,000,000 Ã— 50 = 50,000,000 æ¬¡

å¹³å‡ QPS = 50,000,000 / 86,400 â‰ˆ 579 QPS

æ´»è·ƒ QPS = 50,000,000 / (12 Ã— 3600) â‰ˆ 1,157 QPS

å³°å€¼ QPS = 1,157 Ã— 3 â‰ˆ 3,471 QPS

ç³»ç»Ÿè®¾è®¡ç›®æ ‡ (ç•™ 20% å†—ä½™):
= 3,471 Ã— 1.2 â‰ˆ 4,165 QPS
```

---

## ä¸‰ã€æ€§èƒ½æµ‹è¯•æ–¹æ³•

### 3.1 è´Ÿè½½æµ‹è¯• (Load Testing)

**ç›®çš„**: éªŒè¯ç³»ç»Ÿåœ¨é¢„æœŸè´Ÿè½½ä¸‹çš„æ€§èƒ½è¡¨ç°ã€‚

**æ­¥éª¤**:
1. ç¡®å®šç›®æ ‡ QPS/TPS
2. è®¾è®¡æµ‹è¯•åœºæ™¯ï¼ˆè¯»å†™æ¯”ä¾‹ã€å¹¶å‘æ•°ï¼‰
3. é€æ­¥å¢åŠ è´Ÿè½½
4. ç›‘æ§ç³»ç»ŸæŒ‡æ ‡ï¼ˆCPUã€å†…å­˜ã€å“åº”æ—¶é—´ï¼‰
5. æ‰¾åˆ°æ€§èƒ½æ‹ç‚¹

**å·¥å…·**:
- **wrk**: è½»é‡çº§ HTTP åŸºå‡†æµ‹è¯•å·¥å…·
  ```bash
  wrk -t12 -c400 -d30s http://localhost:8080/api
  # -t12: 12ä¸ªçº¿ç¨‹
  # -c400: 400ä¸ªå¹¶å‘è¿æ¥
  # -d30s: æŒç»­30ç§’
  ```

- **Apache JMeter**: åŠŸèƒ½å…¨é¢çš„æ€§èƒ½æµ‹è¯•å·¥å…·
- **Locust**: Python ç¼–å†™çš„åˆ†å¸ƒå¼è´Ÿè½½æµ‹è¯•å·¥å…·
- **hey**: Go ç¼–å†™çš„ HTTP è´Ÿè½½ç”Ÿæˆå™¨

### 3.2 å‹åŠ›æµ‹è¯• (Stress Testing)

**ç›®çš„**: æ‰¾åˆ°ç³»ç»Ÿçš„æé™å®¹é‡ã€‚

**æ–¹æ³•**:
```
1. ä»è¾ƒä½ QPS å¼€å§‹
2. æ¯ 2 åˆ†é’Ÿå¢åŠ  20% è´Ÿè½½
3. æŒç»­åˆ°ç³»ç»Ÿå‡ºç°ä»¥ä¸‹ä»»ä¸€æƒ…å†µ:
   - å“åº”æ—¶é—´æ€¥å‰§å¢åŠ  (P99 > SLA)
   - é”™è¯¯ç‡è¶…è¿‡ 1%
   - CPU ä½¿ç”¨ç‡ > 80%
   - å†…å­˜è€—å°½æˆ–é¢‘ç¹ GC
4. è®°å½•æ­¤æ—¶çš„ QPS ä½œä¸ºç³»ç»Ÿå®¹é‡
```

### 3.3 å®¹é‡æµ‹è¯• (Capacity Testing)

**ç›®æ ‡**: ç¡®å®šç³»ç»Ÿèƒ½æ”¯æŒçš„æœ€å¤§ç”¨æˆ·æ•°ã€‚

**è®¡ç®—**:
```
æœ€å¤§å¹¶å‘ç”¨æˆ·æ•° = æœ€å¤§ QPS Ã— å¹³å‡å“åº”æ—¶é—´

ç¤ºä¾‹:
- ç³»ç»Ÿæœ€å¤§ QPS = 5000
- å¹³å‡å“åº”æ—¶é—´ = 200ms = 0.2s
- æœ€å¤§å¹¶å‘ç”¨æˆ· = 5000 Ã— 0.2 = 1000 äºº
```

---

## å››ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 4.1 æå‡ QPS çš„æ–¹æ³•

**1. æ°´å¹³æ‰©å±• (Scale Out)**
```
å¢åŠ æœåŠ¡å™¨æ•°é‡:
å•æœº QPS = 1000
éœ€è¦å³°å€¼ QPS = 5000
éœ€è¦æœåŠ¡å™¨ = 5000 / 1000 = 5 å° (è€ƒè™‘å†—ä½™å®é™…éƒ¨ç½² 6-7 å°)
```

**2. å‚ç›´æ‰©å±• (Scale Up)**
```
å‡çº§ç¡¬ä»¶é…ç½®:
- CPU: 4æ ¸ â†’ 8æ ¸ (QPS æå‡ 50%-80%)
- å†…å­˜: 8GB â†’ 16GB (å‡å°‘ GCï¼Œæå‡ QPS)
- ç½‘ç»œ: 1Gbps â†’ 10Gbps (I/O å¯†é›†å‹åº”ç”¨)
```

**3. ä»£ç ä¼˜åŒ–**
```
- å‡å°‘æ•°æ®åº“æŸ¥è¯¢ (N+1 é—®é¢˜)
- ä½¿ç”¨è¿æ¥æ±  (æ•°æ®åº“ã€HTTP)
- å¼‚æ­¥å¤„ç†éå…³é”®è·¯å¾„
- ç¼“å­˜çƒ­ç‚¹æ•°æ®
```

**4. æ¶æ„ä¼˜åŒ–**
```
- å¼•å…¥ç¼“å­˜å±‚ (Redis, Memcached)
- ä½¿ç”¨ CDN åˆ†å‘é™æ€èµ„æº
- æ•°æ®åº“è¯»å†™åˆ†ç¦»
- æ¶ˆæ¯é˜Ÿåˆ—å‰Šå³°
```

### 4.2 æå‡ TPS çš„æ–¹æ³•

**1. æ•°æ®åº“ä¼˜åŒ–**
```sql
-- æ‰¹é‡æ’å…¥ä»£æ›¿å•æ¡æ’å…¥
-- æ…¢:
INSERT INTO users VALUES (1, 'Alice');
INSERT INTO users VALUES (2, 'Bob');

-- å¿« (TPS æå‡ 10-100 å€):
INSERT INTO users VALUES
  (1, 'Alice'),
  (2, 'Bob'),
  (3, 'Charlie');
```

**2. äº‹åŠ¡ä¼˜åŒ–**
```sql
-- å‡å°‘äº‹åŠ¡èŒƒå›´
BEGIN;
  UPDATE accounts SET balance = balance - 100 WHERE id = 1;
  UPDATE accounts SET balance = balance + 100 WHERE id = 2;
COMMIT;
-- å°†æ—¥å¿—è®°å½•ç§»åˆ°äº‹åŠ¡å¤–å¼‚æ­¥å¤„ç†
```

**3. é”ä¼˜åŒ–**
```
- ä¹è§‚é”ä»£æ›¿æ‚²è§‚é” (CAS)
- å‡å°é”ç²’åº¦ (è¡Œé”ä»£æ›¿è¡¨é”)
- é¿å…é•¿äº‹åŠ¡å ç”¨é”
```

**4. åˆ†åº“åˆ†è¡¨**
```
æ°´å¹³åˆ†ç‰‡:
å•åº“ TPS = 3000
åˆ†ä¸º 4 ä¸ªåˆ†ç‰‡
æ€» TPS = 3000 Ã— 4 = 12,000
```

---

## äº”ã€ç›‘æ§ä¸å‘Šè­¦

### 5.1 å…³é”®æŒ‡æ ‡

**å®æ—¶ç›‘æ§**:
```
QPS/TPS:
- å½“å‰å€¼
- è¿‡å» 1 å°æ—¶å¹³å‡å€¼
- åŒæ¯”æ˜¨å¤©/ä¸Šå‘¨

å“åº”æ—¶é—´:
- P50, P95, P99, P99.9
- å¹³å‡å“åº”æ—¶é—´

é”™è¯¯ç‡:
- 4xx é”™è¯¯ç‡
- 5xx é”™è¯¯ç‡
- è¶…æ—¶ç‡

ç³»ç»Ÿèµ„æº:
- CPU ä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- ç½‘ç»œ I/O
- ç£ç›˜ I/O
```

### 5.2 å‘Šè­¦é˜ˆå€¼è®¾ç½®

**ç¤ºä¾‹é…ç½®**:
```yaml
alerts:
  - name: HighQPS
    condition: qps > 4000
    duration: 2m
    severity: warning

  - name: CriticalQPS
    condition: qps > 5000
    duration: 1m
    severity: critical

  - name: HighLatency
    condition: p99_latency > 500ms
    duration: 5m
    severity: warning

  - name: HighErrorRate
    condition: error_rate > 1%
    duration: 3m
    severity: critical
```

### 5.3 å®¹é‡è§„åˆ’æŒ‡æ ‡

**å¥åº·çŠ¶æ€è¯„ä¼°**:
```
âœ… ç»¿è‰² (å¥åº·):
- å½“å‰ QPS < è®¾è®¡å®¹é‡çš„ 50%
- P99 å»¶è¿Ÿ < SLA çš„ 50%
- é”™è¯¯ç‡ < 0.1%
- CPU < 50%

âš ï¸ é»„è‰² (è­¦å‘Š):
- å½“å‰ QPS = è®¾è®¡å®¹é‡çš„ 50%-70%
- P99 å»¶è¿Ÿ = SLA çš„ 50%-80%
- é”™è¯¯ç‡ = 0.1%-0.5%
- CPU = 50%-70%

ğŸ”´ çº¢è‰² (å±é™©):
- å½“å‰ QPS > è®¾è®¡å®¹é‡çš„ 70%
- P99 å»¶è¿Ÿ > SLA çš„ 80%
- é”™è¯¯ç‡ > 0.5%
- CPU > 70%

â›” å±æ€¥:
- å½“å‰ QPS > è®¾è®¡å®¹é‡
- P99 å»¶è¿Ÿ > SLA
- é”™è¯¯ç‡ > 1%
- CPU > 90%
```

---

## å…­ã€å®æˆ˜æ¡ˆä¾‹

### æ¡ˆä¾‹ 1: Web API æœåŠ¡æ€§èƒ½è¯„ä¼°

**èƒŒæ™¯**:
- REST API æœåŠ¡
- é¢„æœŸ DAU: 50 ä¸‡
- äººå‡è¯·æ±‚: 30 æ¬¡/å¤©

**è¯„ä¼°è¿‡ç¨‹**:

```
1. è®¡ç®— QPS éœ€æ±‚:
   æ—¥è¯·æ±‚ = 500,000 Ã— 30 = 15,000,000
   å¹³å‡ QPS = 15,000,000 / 86,400 â‰ˆ 174
   å³°å€¼ QPS (3å€) = 174 Ã— 3 = 522
   è®¾è®¡ç›®æ ‡ = 522 Ã— 1.5 = 783 QPS

2. å•æœºæ€§èƒ½æµ‹è¯•:
   wrk -t4 -c100 -d60s http://api.example.com/users
   ç»“æœ: å•æœº QPS = 300

3. å®¹é‡è§„åˆ’:
   éœ€è¦æœåŠ¡å™¨ = 783 / 300 â‰ˆ 3 å°
   å®é™…éƒ¨ç½² 4 å° (N+1 å†—ä½™)

4. æ¶æ„è®¾è®¡:
   [Load Balancer]
        |
   [4 Ã— API Server]
        |
   [Redis Cluster] + [MySQL Master-Slave]
```

### æ¡ˆä¾‹ 2: æ•°æ®åº“ TPS è¯„ä¼°

**èƒŒæ™¯**:
- è®¢å•ç³»ç»Ÿ
- æ—¥è®¢å•é‡: 10 ä¸‡ç¬”
- å³°å€¼æ—¶æ®µå æ¯”: 30%

**è¯„ä¼°è¿‡ç¨‹**:

```
1. è®¡ç®— TPS éœ€æ±‚:
   å¹³å‡ TPS = 100,000 / 86,400 â‰ˆ 1.16
   å³°å€¼è®¢å• = 100,000 Ã— 30% = 30,000
   å³°å€¼æ—¶æ®µ = æ™š 8-10 ç‚¹ (2 å°æ—¶)
   å³°å€¼ TPS = 30,000 / (2 Ã— 3600) â‰ˆ 4.17
   ç¬æ—¶å³°å€¼ (5å€) = 4.17 Ã— 5 â‰ˆ 21 TPS

2. MySQL æ€§èƒ½æµ‹è¯•:
   å•æœº MySQL TPS â‰ˆ 1000-3000 (å–å†³äºäº‹åŠ¡å¤æ‚åº¦)
   å½“å‰éœ€æ±‚: 21 TPS
   ç»“è®º: å•æœº MySQL è¶³å¤Ÿ

3. ä¼˜åŒ–å»ºè®®:
   - ä¸»ä»åˆ†ç¦» (è¯»å†™åˆ†ç¦»)
   - å¢åŠ  Redis ç¼“å­˜
   - æ‰¹é‡æäº¤ä¼˜åŒ–
   - è¿æ¥æ± é…ç½®: 50-100 è¿æ¥
```

---

## ä¸ƒã€å¸¸è§é—®é¢˜ä¸è§£ç­”

### Q1: QPS å’Œ RPS (Requests Per Second) æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

**ç­”**: åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼ŒQPS å’Œ RPS æ˜¯åŒä¹‰è¯ï¼Œéƒ½è¡¨ç¤ºæ¯ç§’è¯·æ±‚æ•°ã€‚æŸäº›æ–‡çŒ®ä¸­ï¼š
- QPS å¼ºè°ƒ"æŸ¥è¯¢"ï¼ˆQueryï¼‰ï¼Œä¾§é‡æ•°æ®åº“æˆ–è¯»æ“ä½œ
- RPS æ›´é€šç”¨ï¼ŒåŒ…å«æ‰€æœ‰ç±»å‹çš„è¯·æ±‚

å®é™…ä½¿ç”¨ä¸­ï¼Œä¸¤è€…å¯äº’æ¢ã€‚

### Q2: ä¸ºä»€ä¹ˆå³°å€¼ QPS è¦åŠ å†—ä½™ï¼Ÿ

**ç­”**:
1. **çªå‘æµé‡**: è¥é”€æ´»åŠ¨ã€çƒ­ç‚¹äº‹ä»¶å¯èƒ½å¯¼è‡´æµé‡ç¬é—´æš´å¢
2. **æœåŠ¡å™¨æ•…éšœ**: N+1 å†—ä½™ä¿è¯å•å°æ•…éšœæ—¶ç³»ç»Ÿä»å¯ç”¨
3. **å‡çº§ç»´æŠ¤**: æ»šåŠ¨å‡çº§æ—¶éƒ¨åˆ†æœåŠ¡å™¨ä¸‹çº¿
4. **æ€§èƒ½æŠ–åŠ¨**: GCã€ç½‘ç»œæŠ–åŠ¨å¯¼è‡´çŸ­æ—¶æ€§èƒ½ä¸‹é™

å»ºè®®å†—ä½™æ¯”ä¾‹ï¼š
- æ™®é€šä¸šåŠ¡: 20%-50%
- æ ¸å¿ƒä¸šåŠ¡: 50%-100%
- é‡‘èç³»ç»Ÿ: 100%-200%

### Q3: å¦‚ä½•ç¡®å®šå³°å€¼å› å­ï¼Ÿ

**ç­”**: æ ¹æ®ä¸šåŠ¡ç‰¹å¾ï¼š

| ä¸šåŠ¡ç±»å‹ | å³°å€¼å› å­ | åŸå›  |
|----------|----------|------|
| ä¼ä¸šå†…éƒ¨ç³»ç»Ÿ | 1.5-2 | æµé‡å‡åŒ€ï¼Œæ— æ˜æ˜¾å³°å€¼ |
| æ–°é—»/åª’ä½“ | 3-5 | çƒ­ç‚¹æ–°é—»å¯¼è‡´çªå‘æµé‡ |
| ç”µå•†å¹³å° | 5-10 | ä¿ƒé”€æ´»åŠ¨ã€èŠ‚å‡æ—¥ |
| ç¤¾äº¤åª’ä½“ | 3-8 | æ™šé—´é«˜å³°ã€çƒ­ç‚¹äº‹ä»¶ |
| ç§’æ€/æŠ¢è´­ | 100-1000 | ç¬æ—¶æé«˜å¹¶å‘ |

**ç¡®å®šæ–¹æ³•**:
1. å†å²æ•°æ®åˆ†æ: æŸ¥çœ‹è¿‡å»å³°å€¼/å¹³å‡å€¼æ¯”ä¾‹
2. ä¸šåŠ¡é¢„æµ‹: æ ¹æ®è¥é”€è®¡åˆ’è°ƒæ•´
3. ç°åº¦æµ‹è¯•: å°èŒƒå›´éªŒè¯æµé‡æ¨¡å¼
4. æŒç»­ç›‘æ§: æ ¹æ®å®é™…è°ƒæ•´é¢„ä¼°

### Q4: TPS ä¸Šä¸å»æ€ä¹ˆä¼˜åŒ–ï¼Ÿ

**ç­”**:

**è¯Šæ–­æ­¥éª¤**:
```
1. æ‰¾åˆ°ç“¶é¢ˆ:
   - CPU é«˜? â†’ ä»£ç ä¼˜åŒ–ã€å¢åŠ æœºå™¨
   - å†…å­˜é«˜? â†’ æ£€æŸ¥å†…å­˜æ³„æ¼ã€å¢åŠ å†…å­˜
   - ç£ç›˜ I/O é«˜? â†’ ä½¿ç”¨ SSDã€ä¼˜åŒ–æŸ¥è¯¢
   - é”ç­‰å¾…? â†’ ä¼˜åŒ–äº‹åŠ¡ã€å‡å°é”ç²’åº¦

2. æ•°æ®åº“ä¼˜åŒ–:
   EXPLAIN SELECT ... ; -- åˆ†ææ…¢æŸ¥è¯¢
   - æ·»åŠ ç´¢å¼•
   - åˆ†åŒºè¡¨
   - è¯»å†™åˆ†ç¦»

3. äº‹åŠ¡ä¼˜åŒ–:
   - å‡å°‘äº‹åŠ¡èŒƒå›´
   - æ‰¹é‡æ“ä½œ
   - å¼‚æ­¥å¤„ç†

4. æ¶æ„ä¼˜åŒ–:
   - åˆ†åº“åˆ†è¡¨
   - NoSQL è¾…åŠ©
   - ç¼“å­˜çƒ­ç‚¹æ•°æ®
```

---

## å…«ã€æœ€ä½³å®è·µæ€»ç»“

### 8.1 è®¾è®¡é˜¶æ®µ

âœ… **å¿…åš**:
1. ä¼°ç®—æœªæ¥ 6-12 ä¸ªæœˆçš„æµé‡å¢é•¿
2. ç•™è¶³ 50%-100% å®¹é‡å†—ä½™
3. è®¾è®¡æ°´å¹³æ‰©å±•èƒ½åŠ›ï¼ˆæ— çŠ¶æ€æœåŠ¡ï¼‰
4. æ˜ç¡® SLA æŒ‡æ ‡ï¼ˆQPSã€å»¶è¿Ÿã€å¯ç”¨æ€§ï¼‰

âŒ **é¿å…**:
1. ä»…åŸºäºå½“å‰æµé‡è®¾è®¡
2. å•ç‚¹ç“¶é¢ˆï¼ˆæ•°æ®åº“ã€ç¼“å­˜ï¼‰
3. è¿‡åº¦ä¼˜åŒ–ï¼ˆè¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æºï¼‰

### 8.2 å¼€å‘é˜¶æ®µ

âœ… **å¿…åš**:
1. ç¼–å†™æ€§èƒ½æµ‹è¯•ç”¨ä¾‹
2. ä½¿ç”¨è¿æ¥æ± ã€å¯¹è±¡æ± 
3. å¼‚æ­¥å¤„ç†éå…³é”®è·¯å¾„
4. åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´

âŒ **é¿å…**:
1. åŒæ­¥é˜»å¡ I/O
2. N+1 æŸ¥è¯¢é—®é¢˜
3. å¤§äº‹åŠ¡ã€é•¿äº‹åŠ¡
4. æ— é™åˆ¶çš„èµ„æºä½¿ç”¨

### 8.3 è¿ç»´é˜¶æ®µ

âœ… **å¿…åš**:
1. å®æ—¶ç›‘æ§ QPS/TPS/å»¶è¿Ÿ
2. è®¾ç½®åˆç†å‘Šè­¦é˜ˆå€¼
3. å®šæœŸå‹æµ‹éªŒè¯å®¹é‡
4. å®¹é‡è§„åˆ’è¯„å®¡ï¼ˆå­£åº¦ï¼‰

âŒ **é¿å…**:
1. åªåœ¨å‡ºé—®é¢˜æ—¶æŸ¥çœ‹ç›‘æ§
2. å‘Šè­¦é£æš´ï¼ˆé˜ˆå€¼è¿‡æ•æ„Ÿï¼‰
3. é•¿æœŸè¿è¡Œåœ¨é«˜è´Ÿè½½ï¼ˆ>70%ï¼‰

---

## å‚è€ƒèµ„æ–™

1. **AWS Builders' Library**: Using Load Testing to Ensure Service Scale
2. **Google SRE Book**: Chapter 6 - Monitoring Distributed Systems
3. **High Performance MySQL**: Chapter 2 - Benchmarking MySQL
4. **Designing Data-Intensive Applications**: Chapter 1 - Reliability, Scalability, Maintainability

---

**å­¦ä¹ æ£€æŸ¥**:

- [ ] èƒ½è§£é‡Š QPS å’Œ TPS çš„åŒºåˆ«å¹¶ä¸¾ä¾‹
- [ ] èƒ½è®¡ç®—ç»™å®šåœºæ™¯çš„å³°å€¼ QPS
- [ ] ç†è§£å³°å€¼å› å­çš„é€‰å–ä¾æ®
- [ ] èƒ½ä½¿ç”¨ wrk/JMeter è¿›è¡Œæ€§èƒ½æµ‹è¯•
- [ ] çŸ¥é“å¦‚ä½•ä¼˜åŒ– QPS å’Œ TPS
- [ ] èƒ½è®¾è®¡åˆç†çš„ç›‘æ§å‘Šè­¦ç­–ç•¥

**ä¸‹ä¸€æ­¥**: å­¦ä¹ å»¶è¿Ÿåˆ†æ (Latency Analysis) â†’ `èµ„æ–™2-å»¶è¿Ÿåˆ†æè¯¦è§£.md`
